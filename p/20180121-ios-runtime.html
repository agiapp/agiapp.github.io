<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="ä»»æ³¢çš„åšå®¢">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <!-- è§£å†³ä¸€äº›å›¾åºŠé™åˆ¶å¤–é“¾å›¾ç‰‡403ä¸æ˜¾ç¤º -->
    <meta name="referrer" content="no-referrer">
    <link rel="dns-prefetch" href="http://blog.91renb.com">
    <link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <!-- è®¾ç½®ä»£ç é«˜äº® -->
    <link rel="stylesheet" type="text/css" href="/css/highlight/xcode.css">
    <script type="text/javascript" src="/js/highlight.pack.js"></script>
    <script>
        // highlight
        hljs.initHighlightingOnLoad();
    </script>
    <!--SEO-->

<meta name="description" content="å—¨,æ¬¢è¿è®¿é—®ä»»æ³¢çš„ä¸ªäººåšå®¢,åšä¸»ç›®å‰æ˜¯ä¸€ä½iOSå¼€å‘å·¥ç¨‹å¸ˆã€‚å¸Œæœ›é€šè¿‡è¿™ä¸ªæŠ€æœ¯åšå®¢,è®°å½•æŠ€æœ¯å­¦ä¹ ,æ€»ç»“å·¥ä½œç»éªŒ,ä¸å¤§å®¶åˆ†äº«äº¤æµã€‚å­¦ä¹ å°±æ˜¯ç”Ÿäº§åŠ›ï¼Œä¸“æ³¨ç²¾å½©ï¼Œä¸“æ³¨äºåˆ†äº«ã€‚">


<meta name="keywords" content="ä»»æ³¢,ä¸ªäººåšå®¢,æŠ€æœ¯åšå®¢,iOSå¼€å‘,å‰ç«¯å¼€å‘,Github,åšå®¢å›­,ç®€ä¹¦,APPå¼€å‘,ä¸“æ³¨ç²¾å½©">


<meta name="author" content="ä»»æ³¢">


<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>iOSçŸ¥è¯†ç‚¹-Runtime | ä»»æ³¢çš„åšå®¢</title>


    <link rel="alternate" href="/atom.xml" title="ä»»æ³¢çš„åšå®¢" type="application/atom+xml">


    <link rel="icon" href="/img/favicon.ico">

    



<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






<!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("", "");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = '0 ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
}); 
</script>
    
    <meta name="baidu-site-verification" content="FPIfC8aCPl">

    
        <script>
        // ç™¾åº¦è‡ªåŠ¨æ¨é€åŠŸèƒ½(hexoåšå®¢é“¾æ¥è‡ªåŠ¨æäº¤/æ¨é€åˆ°ç™¾åº¦ï¼Œè®©ç™¾åº¦å¿«é€Ÿæ”¶å½•)
        // è‡ªåŠ¨æ¨é€å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ä½ ä»£ç é‡Œé¢åµŒå…¥è‡ªåŠ¨æ¨é€JSä»£ç ï¼Œåœ¨é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé¡µé¢URLå°†ç«‹å³è¢«æ¨é€ç»™ç™¾åº¦
        // è‡ªåŠ¨æ¨é€sitemapåˆ°ç™¾åº¦ï¼šæ¯æ¬¡è®¿é—®åšå®¢ä¸­çš„é¡µé¢ä¼šè‡ªåŠ¨å‘ç™¾åº¦æäº¤ã€‚
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
        </script>
    


    
    <meta name="google-site-verification" content="cqaWnWf4Rtt-ABBwCZTscEqNwdfLDpBnZWo1dkYwUkM">


    <!-- å†…æ¥å…¥ç½‘é¡µåœ¨çº¿è”ç³»åŠŸèƒ½ -->
    
        <script>
          (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
          daovoice('init', {
              app_id: "0c0b639b"
            });
          daovoice('update');
        </script>

    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">ä½ ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸ºäº†ä½ æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼Œè¯·æ›´æ–°æµè§ˆå™¨çš„ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨å…¶ä»–ç°ä»£æµè§ˆå™¨ï¼Œæ¯”å¦‚Chromeã€Firefoxã€Safariç­‰ã€‚</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(/img/banner.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" id="high" href="javascript:shake()" ondblclick="location.reload(true)" title="ä¸€èµ·æ‘‡æ‘†ï¼">
            <img src="/img/avatar.jpg" alt="logoå¤´åƒ">
        </a>
        <div class="branding">
            
                <h2> Renboâ€™s Blog </h2>
             
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="fa fa-bars"></i>
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation"><a href="/"><i class="fa fa-fw "></i>é¦–é¡µ</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/ios/"><i class="fa fa-fw "></i>iOS</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/web/"><i class="fa fa-fw "></i>å‰ç«¯</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/server/"><i class="fa fa-fw "></i>åç«¯</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/tools/"><i class="fa fa-fw "></i>å·¥å…·</a>
                            </li>
                        
                            <li role="presentation"><a href="/categories/others/"><i class="fa fa-fw "></i>å…¶å®ƒ</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-9 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="iOSçŸ¥è¯†ç‚¹-Runtime">
            
	            iOSçŸ¥è¯†ç‚¹-Runtime
            
        </h1>
        <div class="post-meta">
    
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a href="/categories/ios/">iOS</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a href="/tags/ios-knowledge-module/">iOSçŸ¥è¯†ç‚¹</a>
            
        </span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">2018-01-21</span>
    </span>

       
    
</div>

            
            
    </div>
    
    <div class="post-body post-content">
        <h1 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1.å‰è¨€"></a>1.å‰è¨€</h1><ul>
<li><p>å¸¦ç€é—®é¢˜æ¥å­¦ä¹ Runtimeï¼š</p>
<p>Q1ï¼šä»€ä¹ˆæ˜¯runtimeè¿è¡Œæ—¶</p>
<p>Q2ï¼šä»€ä¹ˆæ˜¯isaæŒ‡é’ˆ</p>
<p>Q3ï¼šä»€ä¹ˆæ˜¯SELï¼Œä»€ä¹ˆæ˜¯IMPï¼Œ ä»€ä¹ˆæ˜¯Method</p>
<p>Q4ï¼šä»€ä¹ˆæ˜¯æ¶ˆæ¯æœºåˆ¶</p>
<p>Q5ï¼šruntimeè¿è¡Œæ—¶çš„ä½¿ç”¨åœºæ™¯</p>
</li>
</ul>
<h1 id="2-æ¦‚å¿µ"><a href="#2-æ¦‚å¿µ" class="headerlink" title="2.æ¦‚å¿µ"></a>2.æ¦‚å¿µ</h1><ul>
<li><p><strong>runtime</strong></p>
<blockquote>
<p>Objective-Cæ˜¯åŠ¨æ€è¯­è¨€ï¼Œå®ƒå°†å¾ˆå¤šé™æ€è¯­è¨€åœ¨ç¼–è¯‘å’Œé“¾æ¥æ—¶åšçš„äº‹æ”¾åˆ°äº†è¿è¡Œæ—¶ï¼Œè¿™ä¸ªè¿è¡Œæ—¶ç³»ç»Ÿå°±æ˜¯runtimeã€‚</p>
<p>runtimeå…¶å®å°±æ˜¯ä¸€ä¸ªåº“ï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯ç”¨Cå’Œæ±‡ç¼–å†™çš„ä¸€å¥—APIï¼Œè¿™ä¸ªåº“ä½¿Cè¯­è¨€æœ‰äº†é¢å‘å¯¹è±¡çš„èƒ½åŠ›ã€‚</p>
<p>é™æ€è¯­è¨€ï¼šåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚</p>
<p>åŠ¨æ€è¯­è¨€ï¼ˆOCï¼‰ï¼šåœ¨è¿è¡Œçš„æ—¶å€™æ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ã€‚</p>
</blockquote>
</li>
<li><p><strong>isa</strong></p>
<blockquote>
<p>OCä¸­ï¼Œç±»å’Œç±»çš„å®ä¾‹åœ¨æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯å¯¹è±¡ï¼Œä»»ä½•å¯¹è±¡éƒ½æœ‰isaæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ç±»æˆ–å…ƒç±»ï¼ˆå…ƒç±»åé¢ä¼šè®²è§£ï¼‰ã€‚</p>
</blockquote>
</li>
<li><p><strong>SEL</strong></p>
<blockquote>
<p>SELï¼ˆåˆå«é€‰æ‹©å™¨ï¼‰æ˜¯æ–¹æ³•çš„selectorçš„æŒ‡é’ˆã€‚æ–¹æ³•çš„selectorè¡¨ç¤ºè¿è¡Œæ—¶æ–¹æ³•çš„åå­—ã€‚OCåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šä¾æ®æ¯ä¸€ä¸ªæ–¹æ³•çš„åå­—ã€å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ•´å‹æ ‡è¯†(Intç±»å‹çš„åœ°å€)ï¼Œè¿™ä¸ªæ ‡è¯†å°±æ˜¯SELã€‚</p>
</blockquote>
</li>
<li><p><strong>IMP</strong></p>
<blockquote>
<p>IMPæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ–¹æ³•æœ€ç»ˆå®ç°çš„é¦–åœ°å€ã€‚SELå°±æ˜¯ä¸ºäº†æŸ¥æ‰¾æ–¹æ³•çš„æœ€ç»ˆå®ç°IMPã€‚</p>
</blockquote>
</li>
<li><p><strong>Method</strong></p>
<blockquote>
<p>ç”¨äºè¡¨ç¤ºç±»å®šä¹‰ä¸­çš„æ–¹æ³•ï¼Œå®ƒçš„ç»“æ„ä½“ä¸­åŒ…å«ä¸€ä¸ªSELå’ŒIMPï¼Œç›¸å½“äºåœ¨SELå’ŒIMPä¹‹é—´ä½œäº†ä¸€ä¸ªæ˜ å°„ã€‚</p>
</blockquote>
</li>
<li><p><strong>æ¶ˆæ¯æœºåˆ¶</strong></p>
<blockquote>
<p>ä»»ä½•æ–¹æ³•çš„è°ƒç”¨æœ¬è´¨å°±æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ã€‚ç¼–è¯‘å™¨ä¼šå°†æ¶ˆæ¯è¡¨è¾¾å¼[receiver message]è½¬åŒ–ä¸ºä¸€ä¸ªæ¶ˆæ¯å‡½æ•°objc_msgSend(receiver, selector)ã€‚</p>
</blockquote>
</li>
<li><p><strong>Runtimeçš„ä½¿ç”¨</strong></p>
<blockquote>
<p>è·å–å±æ€§åˆ—è¡¨ï¼Œè·å–æˆå‘˜å˜é‡åˆ—è¡¨ï¼Œè·å¾—æ–¹æ³•åˆ—è¡¨ï¼Œè·å–åè®®åˆ—è¡¨ï¼Œæ–¹æ³•äº¤æ¢ï¼ˆé»‘é­”æ³•ï¼‰ï¼ŒåŠ¨æ€çš„æ·»åŠ æ–¹æ³•ï¼Œè°ƒç”¨ç§æœ‰æ–¹æ³•ï¼Œä¸ºåˆ†ç±»æ·»åŠ å±æ€§ã€‚</p>
</blockquote>
<p>â€‹</p>
</li>
</ul>
<p><strong>Runtimeæ¶ˆæ¯ä¼ é€’</strong></p>
<p>ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•åƒè¿™æ · <code>[obj foo]</code>ï¼Œç¼–è¯‘å™¨è½¬æˆæ¶ˆæ¯å‘é€ <code>objc_msgSend(obj, foo)</code>ï¼Œ<code>Runtime</code> æ—¶æ‰§è¡Œçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œé€šè¿‡<code>obj</code>çš„<code>isa</code>æŒ‡é’ˆæ‰¾åˆ°å®ƒçš„ <code>class</code> ;</li>
<li>åœ¨ <code>class</code> çš„ <code>method list</code> æ‰¾ <code>foo</code> ;</li>
<li>å¦‚æœ <code>class</code> ä¸­æ²¡åˆ° <code>foo</code>ï¼Œç»§ç»­å¾€å®ƒçš„ <code>superclass</code> ä¸­æ‰¾ ;</li>
<li>ä¸€æ—¦æ‰¾åˆ° <code>foo</code> è¿™ä¸ªå‡½æ•°ï¼Œå°±å»æ‰§è¡Œå®ƒçš„å®ç°<code>IMP</code> ï¼ˆæ–¹æ³•çš„å®ç°ï¼ŒIMPæ˜¯æ‰§è¡Œæ–¹æ³•å®ç°çš„å†…å­˜åœ°å€çš„æŒ‡é’ˆï¼‰ã€‚</li>
</ul>
<h1 id="3-åº”ç”¨åœºæ™¯"><a href="#3-åº”ç”¨åœºæ™¯" class="headerlink" title="3.åº”ç”¨åœºæ™¯"></a>3.åº”ç”¨åœºæ™¯</h1><ul>
<li><p>å…³è”å¯¹è±¡(Objective-C Associated Objects)ç»™åˆ†ç±»å¢åŠ å±æ€§</p>
</li>
<li><p>æ–¹æ³•äº¤æ¢ / é»‘é­”æ³•(Method Swizzling)</p>
</li>
<li><p>å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œè‡ªåŠ¨è§£æ¡£</p>
</li>
<li><p>å®ç°å­—å…¸å’Œæ¨¡å‹çš„è‡ªåŠ¨è½¬æ¢(MJExtension)</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1frc63kxno9j31kw10th0b.jpg" alt="Runtimeåº”ç”¨åœºæ™¯"></p>
</li>
</ul>
<p><strong>1ã€‹å…³è”å¯¹è±¡(Objective-C Associated Objects)ç»™åˆ†ç±»å¢åŠ å±æ€§</strong></p>
<p>æˆ‘ä»¬éƒ½æ˜¯çŸ¥é“åˆ†ç±»æ˜¯ä¸èƒ½è‡ªå®šä¹‰å±æ€§å’Œå˜é‡çš„ã€‚ä¸‹é¢é€šè¿‡å…³è”å¯¹è±¡å®ç°ç»™åˆ†ç±»æ·»åŠ å±æ€§ã€‚</p>
<p>å…³è”å¯¹è±¡Runtimeæä¾›äº†ä¸‹é¢å‡ ä¸ªæ¥å£ï¼š</p>
<pre><code class="objective-c">// å…³è”å¯¹è±¡
void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)
// è·å–å…³è”çš„å¯¹è±¡
id objc_getAssociatedObject(id object, const void *key)
// ç§»é™¤å…³è”çš„å¯¹è±¡
void objc_removeAssociatedObjects(id object)

// å‚æ•°è§£é‡Š
// id objectï¼šè¢«å…³è”çš„å¯¹è±¡
// const void *keyï¼šå…³è”çš„keyï¼Œè¦æ±‚å”¯ä¸€
// id valueï¼šå…³è”çš„å¯¹è±¡
// objc_AssociationPolicy policyï¼šå†…å­˜ç®¡ç†çš„ç­–ç•¥
</code></pre>
<p>Demoï¼š</p>
<pre><code class="objective-c">///-----------------------
/// NSObject+BRModel.h
///-----------------------
#import &lt;Foundation/Foundation.h&gt;

@interface NSObject (BRModel)
/** 1.è·å–ç±»çš„å±æ€§åˆ—è¡¨æ•°ç»„ */
+ (NSArray *)br_objectProperties;

/** 2.å­—å…¸è½¬æ¨¡å‹ï¼šç»™å®šä¸€ä¸ªå­—å…¸ï¼Œè¿”å› self ç±»å¯¹åº”çš„æ¨¡å‹å¯¹è±¡ */
+ (instancetype)br_objectWithDictionary:(NSDictionary *)dict;

@end

///-----------------------
/// NSObject+BRModel.m
///-----------------------
#import &quot;NSObject+BRModel.h&quot;
#import &lt;objc/runtime.h&gt;

const char *kPropertyListKey = &quot;kPropertyListKey&quot;;

@implementation NSObject (BRModel)

/// æ‰€æœ‰å­—å…¸è½¬æ¨¡å‹æ¡†æ¶çš„æ ¸å¿ƒç®—æ³•ï¼ˆè¿™é‡Œåªæ˜¯å®ç°ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‚æ‰©å±•ï¼šè¦è€ƒè™‘å­—å…¸çš„åµŒå¥—ï¼‰
/// åœ¨å­—å…¸è½¬æ¨¡å‹æ¡†æ¶ä¸­ï¼Œå¦‚æœå­—å…¸åµŒå¥—å±‚æ¬¡ç»“æ„éå¸¸æ·±ï¼Œæ¡†æ¶ç”±äºåˆ©ç”¨é€’å½’å®ç°è½¬æ¢ï¼Œå†…å­˜æ¶ˆè€—å¤§ï¼Œæ‰§è¡Œæ€§èƒ½ä¸å¥½ï¼
/// YYModel å› ä¸ºåŠŸèƒ½ç®€å•ï¼ˆåœ¨åŠŸèƒ½ä¸Šåšäº†å–èˆï¼Œæ»¡è¶³å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ï¼‰ï¼Œæ‰€ä»¥é€Ÿåº¦å¿«ï¼

// 1.åŠ¨æ€ï¼ˆé€šè¿‡Runtimeå½¢å¼ï¼‰è·å–ç±»çš„å±æ€§åˆ—è¡¨
+ (NSArray *)br_objectProperties {
    /// 1.åˆ©ç”¨â€œå…³è”å¯¹è±¡â€è·å–å±æ€§çš„å€¼ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›ï¼(è¿™é‡Œè·å–å¯¹è±¡ç±»ä¼¼äºæ‡’åŠ è½½ï¼Œåªä¸è¿‡åˆ†ç±»é‡Œé¢ä¸èƒ½åˆ›å»ºå±æ€§ï¼Œç”¨â€œå…³è”å¯¹è±¡â€æ¥æ›¿ä»£)
    /// è¿™é‡Œä½¿ç”¨â€œå…³è”å¯¹è±¡â€å…¶ç›®çš„æ˜¯æé«˜æ•ˆç‡ï¼ˆæ‡’åŠ è½½æ€æƒ³ï¼‰ï¼
    /**
     *  è·å–å…³è”å¯¹è±¡ï¼ˆç›¸å½“äºå±æ€§çš„getteræ–¹æ³•ï¼‰
     *  å‚æ•°1ï¼šå¯¹è±¡
     *  å‚æ•°2ï¼šåŠ¨æ€æ·»åŠ å±æ€§çš„keyï¼ˆç›¸å½“äºå±æ€§åï¼‰
     *  è¿”å›å€¼ï¼šåŠ¨æ€æ·»åŠ çš„â€œå±æ€§å€¼â€
     */
    NSArray *pList = objc_getAssociatedObject(self, kPropertyListKey);
    if (pList != nil) {
        return pList;
    }

    /**
     *  è°ƒç”¨è¿è¡Œæ—¶æ–¹æ³•ï¼Œè·å–ç±»çš„å±æ€§åˆ—è¡¨
     *  class_copyPropertyList():   è·å–ç±»çš„ å±æ€§ åˆ—è¡¨æ–¹æ³•
     *  class_copyIvarList():       è·å–ç±»çš„ æˆå‘˜å˜é‡ åˆ—è¡¨æ–¹æ³•
     *  class_copyMethodList():     è·å–ç±»çš„ æ–¹æ³• åˆ—è¡¨æ–¹æ³•
     *  class_copyProtocolList():   è·å–ç±»çš„ åè®® åˆ—è¡¨æ–¹æ³•
     *  å‚æ•°1ï¼šè¦è·å–çš„ç±»
     *  å‚æ•°2ï¼šç±»å±æ€§çš„ä¸ªæ•°æŒ‡é’ˆï¼ˆ&amp;å±æ€§ä¸ªæ•°ï¼‰
     *  è¿”å›å€¼ï¼šæ‰€æœ‰å±æ€§çš„æ•°ç»„
     */
    unsigned int count = 0;
    // è·å–å±æ€§æ•°ç»„ï¼ˆè¿™é‡Œobjc_property_tæ¥æ”¶çš„æ˜¯æ•°ç»„ï¼Œéœ€è¦å¸¦ *ï¼‰
    objc_property_t *properties = class_copyPropertyList([self class], &amp;count);
    NSMutableArray *propertyNameArr = [[NSMutableArray alloc]init];
    // éå†å±æ€§æ•°ç»„
    for (unsigned int i = 0; i &lt; count; i++) {
        // 1&gt; è·å–å±æ€§(Cè¯­è¨€ä¸­çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œé€šå¸¸ä¸éœ€è¦å¸¦ *)
        objc_property_t property = properties[i];
        // 2&gt; ä»propertyä¸­è·å–å±æ€§çš„åç§°ï¼ˆå³Cè¯­è¨€å­—ç¬¦ä¸²ï¼‰
        const char *cName = property_getName(property);
        // å°†Cè¯­è¨€å­—ç¬¦ä¸²è½¬æˆOCå­—ç¬¦ä¸²
        NSString *name = [NSString stringWithCString:cName encoding:NSUTF8StringEncoding];
        // 3&gt; æ·»åŠ OCå±æ€§ååˆ°æ•°ç»„
        [propertyNameArr addObject:name];
    }
    // é‡Šæ”¾æ•°ç»„ï¼ˆCè¯­è¨€ä¸­ç”¨åˆ°äº†åŒ…å«create/copy/...çš„æ–¹æ³•ï¼Œéƒ½éœ€è¦é‡Šæ”¾å†…å­˜ï¼‰
    free(properties);

    /**
     *  2.åˆ©ç”¨â€œå…³è”å¯¹è±¡â€ä¿å­˜å±æ€§çš„å€¼
     *  å‚æ•°1ï¼šself å¯¹è±¡
     *  å‚æ•°2ï¼šåŠ¨æ€æ·»åŠ å±æ€§çš„keyï¼ˆç›¸å½“äºå±æ€§åï¼‰
     *  å‚æ•°3ï¼šåŠ¨æ€æ·»åŠ å±æ€§çš„å€¼
     *  å‚æ•°4ï¼šå¯¹è±¡çš„å¼•ç”¨å…³ç³»ï¼ˆç±»ä¼¼äºå±æ€§ä¸­çš„ nonatomic,assign/copy/retainï¼‰
     */
    objc_setAssociatedObject(self, kPropertyListKey, [propertyNameArr copy], OBJC_ASSOCIATION_RETAIN_NONATOMIC);

    return [propertyNameArr copy];
}

// 2.å­—å…¸è½¬æ¨¡å‹ï¼šç»™å®šä¸€ä¸ªå­—å…¸ï¼Œè¿”å› self ç±»å¯¹åº”çš„æ¨¡å‹å¯¹è±¡
+ (instancetype)br_objectWithDictionary:(NSDictionary *)dict {
    id object = [[self alloc]init];
    // è·å–å½“å‰å¯¹è±¡çš„å±æ€§åˆ—è¡¨
    // ä¼˜åŒ–ï¼šä½¿ç”¨å…³è”å¯¹è±¡ pList çš„å€¼ä¿å­˜èµ·æ¥ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å»è·å–
    NSArray *pList = [self br_objectProperties];
    // 1&gt; éå†å±æ€§æ•°ç»„
    [pList enumerateObjectsUsingBlock:^(id  _Nonnull pName, NSUInteger idx, BOOL * _Nonnull stop) {
        id pValue = [dict objectForKey:pName];
        // ä½¿ç”¨KVCç»™å¯¹è±¡å±æ€§èµ‹å€¼
        [object setValue:pValue forKey:pName];
    }];
/*
    // 2&gt; éå†å­—å…¸
    [dict enumerateKeysAndObjectsUsingBlock:^(id  _Nonnull key, id  _Nonnull value, BOOL * _Nonnull stop) {
        if ([pList containsObject:key]) {
            // ä½¿ç”¨KVCç»™å¯¹è±¡å±æ€§èµ‹å€¼
            [object setValue:value forKey:key];
        }
    }];
*/
    return object;
}

@end
</code></pre>
<p><strong>2ã€‹æ–¹æ³•äº¤æ¢ï¼ˆé»‘é­”æ³•ï¼‰</strong></p>
<p>ä¸‹é¢å°±æ˜¯runtimeçš„é‡å¤´æˆäº†ï¼Œè¢«ç§°ä½œé»‘é­”æ³•çš„æ–¹æ³•äº¤æ¢Swizzlingã€‚äº¤æ¢æ–¹æ³•æ˜¯åœ¨method_exchangeImplementationsé‡Œå‘ç”Ÿçš„ã€‚</p>
<p>ä½¿ç”¨Swizzlingçš„è¿‡ç¨‹ä¸­è¦æ³¨æ„ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><p>Swizzlingè¦åœ¨+loadæ–¹æ³•ä¸­æ‰§è¡Œ</p>
<blockquote>
<p>è¿è¡Œæ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ¯ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œ+loadä¸+initializeã€‚</p>
<p>+loadä¼šåœ¨mainå‡½æ•°ä¹‹å‰è°ƒç”¨ï¼Œå¹¶ä¸”ä¸€å®šä¼šè°ƒç”¨ã€‚</p>
<p>+initializeæ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ï¼Œæœ‰å¯èƒ½ä¸€ç›´ä¸è¢«è°ƒç”¨ã€‚</p>
<p>ä¸€èˆ¬ä½¿ç”¨Swizzlingæ˜¯ä¸ºäº†å½±å“å…¨å±€ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹æ³•äº¤æ¢ä¸€å®šæˆåŠŸï¼ŒSwizzlingè¦æ”¾åœ¨+loadä¸­æ‰§è¡Œã€‚</p>
</blockquote>
</li>
<li><p>Swizzlingè¦åœ¨dispatch_onceä¸­æ‰§è¡Œ</p>
<blockquote>
<p>Swzzlingæ˜¯ä¸ºäº†å½±å“å…¨å±€ï¼Œæ‰€ä»¥åªè®©å®ƒæ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥è¦æ”¾åœ¨dispatch_onceä¸­ã€‚</p>
</blockquote>
</li>
</ul>
<p>Demoï¼š</p>
<pre><code class="objective-c">///-----------------------
/// UIImageView+BRAdd.h
///-----------------------
#import &lt;UIKit/UIKit.h&gt;

@interface UIImageView (BRAdd)
- (void)br_setImage:(UIImage *)image;
@end

///-----------------------
/// UIImageView+BRAdd.m
///-----------------------
#import &quot;UIImageView+BRAdd.h&quot;
#import &lt;objc/runtime.h&gt;

@implementation UIImageView (BRAdd)
/**
 *  loadæ–¹æ³• ä¼šåœ¨ç±»ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ï¼ˆç±»è¢«åŠ è½½åˆ°è¿è¡Œæ—¶çš„æ—¶å€™ï¼‰è¢«è°ƒç”¨
 *  è°ƒç”¨çš„æ—¶é—´æ¯”è¾ƒé å‰ï¼Œé€‚åˆåœ¨è¿™ä¸ªæ–¹æ³•é‡Œåšæ–¹æ³•äº¤æ¢
 */
+ (void)load {
    // æ–¹æ³•äº¤æ¢åº”è¯¥è¢«ä¿è¯ï¼Œåœ¨ç¨‹åºä¸­åªä¼šæ‰§è¡Œä¸€æ¬¡
    static dispatch_once_t onceToken;
    dispatch_once(&amp;onceToken, ^{
        // 1.è·å– UIImageView ç±»çš„å®ä¾‹æ–¹æ³• setImage:
        Method originalMethod = class_getInstanceMethod([self class], @selector(setImage:));
        // 2.è·å– UIImageView ç±»çš„å®ä¾‹æ–¹æ³• br_setImage: ï¼ˆè¿™ä¸ªæ–¹æ³•æœ¬èº«å®šä¹‰åœ¨åˆ†ç±»ä¸­ï¼Œæ‰€ä»¥èƒ½è·å–åˆ°ï¼‰
        Method swizzledMethod = class_getInstanceMethod([self class], @selector(br_setImage:));
        // 3.äº¤æ¢æ–¹æ³• setImage: å’Œ br_setImage:
        method_exchangeImplementations(originalMethod, swizzledMethod);
    });
}

// å½“åœ¨å…¶å®ƒä½ç½®è°ƒç”¨ setImage: æ–¹æ³•æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨ br_setImage: æ–¹æ³•
- (void)br_setImage:(UIImage *)image {
    NSLog(@&quot;%s&quot;, __FUNCTION__);

    // åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±æƒ³æ·»åŠ çš„å†…å®¹...
    // è°ƒæ•´å›¾ç‰‡å¤§å°ï¼šç”Ÿæˆä¸€å¼ å’ŒimageViewä¸€æ ·å¤§çš„å›¾ç‰‡
    UIImage *newImage = [self newImage:image size:self.bounds.size];

    // è°ƒç”¨ç³»ç»Ÿé»˜è®¤çš„setImage:æ–¹æ³•
    /**
     *  æ³¨æ„ï¼šäº¤æ¢äº†æ–¹æ³•ï¼ˆäº’æ¢èº«ä»½ï¼‰ï¼Œè¿™æ—¶å€™è°ƒç”¨è‡ªå·±ï¼Œçœ‹èµ·æ¥åƒæ˜¯æ­»å¾ªç¯ï¼Œä½†æ˜¯å…¶å®è‡ªå·±çš„å®ç°å·²ç»è¢«æ›¿æ¢äº†
     *  è°ƒç”¨ç³»ç»Ÿçš„setImage:æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œbr_setImage:æ–¹æ³•
     *  è°ƒç”¨br_setImage:æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œç³»ç»Ÿçš„setImage:æ–¹æ³•ï¼ˆè¦æ³¨æ„åŒºåˆ†ï¼ï¼‰
     */
    [self br_setImage:newImage];
}

// é‡æ–°ç”ŸæˆæŒ‡å®šå¤§å°çš„å›¾ç‰‡
- (UIImage *)newImage:(UIImage *)image size:(CGSize)size {
    UIGraphicsBeginImageContextWithOptions(size, YES, 0);
    // é‡æ–°ç»˜åˆ¶å›¾ç‰‡
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    // å–å¾—ç»“æœ
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    // å…³é—­ä¸Šä¸‹æ–‡
    UIGraphicsEndImageContext();
    return newImage;
}

@end


// æ‰©å±•ï¼šæ–¹æ³•äº¤æ¢è¿˜æœ‰ä¸å°‘åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚è®°å½•é¡µé¢è¢«ç‚¹å¼€çš„æ¬¡æ•°ï¼šåªè¦åœ¨UIViewControllerçš„åˆ†ç±»çš„+loadä¸­äº¤æ¢viewDidAppearæ–¹æ³•ï¼Œåœ¨äº¤æ¢çš„æ–¹æ³•ä¸­æ·»åŠ è®°å½•ä»£ç å°±å¯ä»¥äº†ã€‚
</code></pre>

    </div>

    <div class="post-footer">   
        <div>
            
                è½¬è½½å£°æ˜ï¼šå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ Â© <a href="http://blog.91renb.com" target="_blank">renbo</a>
            
        </div>
        <div>
            
        </div>  
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/p/20180828-mini-program-beginner-notes.html" class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>ä¸Šä¸€ç¯‡</a>
    
    
        <a href="/p/20180114-ios-runloop.html" class="next-post btn btn-default">ä¸‹ä¸€ç¯‡<i class="fa fa-angle-right fa-fw"></i></a>
    
</div>


    <div id="comments">
        
	<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var gitalk = new Gitalk({
          clientID:  '18142678935fe7020ca4',
          clientSecret: '02a2ad304800383d4853fa1376579901ed23eba6',
          repo: '91renb.github.io',
          id: window.location.pathname,
          owner: '91renb',
          admin: '91renb',
          distractionFreeMode: 'true',
     })
    gitalk.render('comments')
</script>
	<div id="gitalk-container"></div>	

    </div>


                </main>
                
    <aside class="col-md-3 sidebar">
        
        
		
        
    <div class="widget notification">
        <h3 class="title">å…¬å‘Š</h3>
        <div>
            <img src="/img/qrcode.png" width=100% height=100% alt="" />
        </div>
    </div>

		
        
    <div class="widget">
      <h3 class="title">ç¤¾äº¤</h3> 
        <div class="content social">
            
	            <a href="//github.com/91renb" rel="external nofollow" title="Github" target="_blank">
			    	<i class="github fa fa-github"></i>
			    </a>
            
	            <a href="mailto:ios@91renb.com" rel="external nofollow" title="é‚®ç®±" target="_blank">
			    	<i class="envelope-o fa fa-envelope-o"></i>
			    </a>
            
	            <a href="//wpa.qq.com/msgrd?v=3&uin=2693475166&site=qq&menu=yes" rel="external nofollow" title="è”ç³»QQ" target="_blank">
			    	<i class="qq fa fa-qq"></i>
			    </a>
            
	            <a href="/atom.xml" rel="external nofollow" title="RSS" target="_blank">
			    	<i class="feed fa fa-feed"></i>
			    </a>
            
        </div>
    </div>


		
        
    <div class="widget">
        <h3 class="title">åˆ†ç±»</h3>
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ios/"><i class="fa" aria-hidden="true">iOS</i></a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/"><i class="fa" aria-hidden="true">å…¶å®ƒ</i></a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link current" href="/categories/web/"><i class="fa" aria-hidden="true">å‰ç«¯</i></a><span class="category-list-count">1</span></li></ul>
    </div>


		
        
    <div class="widget">
      <h3 class="title">å½’æ¡£</h3>
        <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/"><i class="fa" aria-hidden="true">2018å¹´08æœˆ</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/"><i class="fa" aria-hidden="true">2018å¹´01æœˆ</i></a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/"><i class="fa" aria-hidden="true">2017å¹´12æœˆ</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/"><i class="fa" aria-hidden="true">2017å¹´11æœˆ</i></a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/"><i class="fa" aria-hidden="true">2017å¹´10æœˆ</i></a><span class="archive-list-count">5</span></li></ul>
    </div>


		
        
  <div class="widget">
    <h3 class="title">æ ‡ç­¾äº‘</h3>
    <div class="content tag-cloud">
        <a href="/tags/github/" style="font-size: 10px;">Github</a> <a href="/tags/hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/nscalendar/" style="font-size: 10px;">NSCalendar</a> <a href="/tags/ios-core/" style="font-size: 20px;">iOSå¹²è´§</a> <a href="/tags/ios-knowledge-module/" style="font-size: 15px;">iOSçŸ¥è¯†ç‚¹</a> <a href="/tags/ios-interview-questions/" style="font-size: 10px;">iOSé¢è¯•é¢˜</a> <a href="/tags/define/" style="font-size: 10px;">å®</a> <a href="/tags/mini-program/" style="font-size: 10px;">å°ç¨‹åº</a> <a href="/tags/developer-account/" style="font-size: 10px;">å¼€å‘è€…è´¦å·</a>
    </div>
  </div>


		
        
    <div class="widget">
        <h3 class="title">å‹é“¾</h3>
        <div class="content friends-link">
        
            <a href="http://www.91renb.com" class="fa" target="_blank">ä¸ªäººä¸»é¡µ</a>
        
            <a href="http://blog.91renb.com" class="fa" target="_blank">ä¸ªäººåšå®¢</a>
        
            <a href="http://www.cnblogs.com/bossren" class="fa" target="_blank">åšå®¢å›­</a>
        
            <a href="https://www.jianshu.com/u/3a796e0ce6a5" class="fa" target="_blank">ç®€ä¹¦ä¸»é¡µ</a>
        
            <a href="https://juejin.im/user/598a62bc6fb9a03c467c0182" class="fa" target="_blank">æ˜é‡‘ä¸»é¡µ</a>
        
            <div id="coding">
                <i class="fa fa-heart"></i><p>Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold">Coding Pages</a></p>
            </div>
        </div>
    </div>


		
    </aside>

            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="hide">
	<i class="fa fa-chevron-up"></i>
</a>


<script type="text/javascript" src="/js/high.js"></script>


<!--- fancybox --->
<script type="text/javascript" src="/js/jquery.fancybox.js"></script>
<script>
  	// ç»™å›¾ç‰‡æ·»åŠ é“¾æ¥
  	$("article img").each(function() {
      	var strA = "<a data-fancybox='preview' href='" + this.src + "'></a>";
      	$(this).wrapAll(strA);
  	});
</script>


<canvas class="fireworks" style="position: fixed; left: 0; top: 0; z-index: 1; pointer-events: none;"></canvas>
<script type="text/javascript" src="https://cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
<script type="text/javascript" src="/js/fireworks.js"></script>


<!---é¼ æ ‡ç‰¹æ•ˆ--->
<script type="text/javascript">
$(function() {
    var a_idx = 0,
        b_idx = 0;
    c_idx = 0;
    jQuery(document).ready(function($) {
        $("body").click(function(e) {
            var a = new Array("æ¬¢è¿æ‚¨ ğŸ¤—", "é“ä»” ğŸ˜Š", "çœŸå¯çˆ±", "ä½ æœ€ç¾", "çœŸèªæ˜", "ä½ æœ€å¥½", "å¥½å‰å®³", "æ£’æ£’å“’", "ç¥ç¦ä½ "),
                b = new Array("#e88486", "#4398fa", "#8da5d5", "#81be53", "#51a5c0", "#e19169", "#ca973d", "#eb8284", "#73c09f", "#da71b1"),
                c = new Array("14", "15", "16", "18", "20", "22", "24");
            var $i = $("<span/>").text(a[a_idx]);
            a_idx = (a_idx + 1) % a.length;
            b_idx = (b_idx + 1) % b.length;
            c_idx = (c_idx + 1) % c.length;
            var x = e.pageX,
                y = e.pageY;
            $i.css({
                "z-index": 999,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "font-size": c[c_idx] + "px",
                "color": b[b_idx]
            });
            $("body").append($i);
            $i.animate({
                "top": y - 180,
                "opacity": 0
            }, 1500, function() {
                $i.remove();
            });
        });
    });
    var _hmt = _hmt || [];
})
</script>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12"> 
                <span>Copyright &copy; 2017-2019  <a href="http://blog.91renb.com" class="copyright-links" target="_blank">ä»»æ³¢</a></span>
                <!-- | -->
                <span>
                	<!-- ç½‘ç«™è®¿é—®äººæ•° -->
                	<!-- <i class="fa fa-user-md"></i><span id="busuanzi_value_site_uv"></span> -->
                	<!-- ç½‘ç«™è®¿é—®æ¬¡æ•° -->
                	<!-- <i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span> -->
                </span>
            </div>
        </div>
    </div>
</div>





<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var gitalk = new Gitalk({
          clientID:  '18142678935fe7020ca4',
          clientSecret: '02a2ad304800383d4853fa1376579901ed23eba6',
          repo: '91renb.github.io',
          id: window.location.pathname,
          owner: '91renb',
          admin: '91renb',
          distractionFreeMode: 'true',
     })
    gitalk.render('comments')
</script>


<script src="/js/app.js?rev=@@hash"></script>


</body>
</html>